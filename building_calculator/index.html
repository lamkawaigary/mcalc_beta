<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å»ºç¯‰ææ–™ç”¨é‡è¨ˆç®—å™¨</title>
    <link rel="manifest" href="../manifest.json">
    <link rel="icon" type="image/x-icon" href="../favicon.ico">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .calculator-selector {
            margin-bottom: 20px;
        }
        .calculator-form {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        .calculator-form.active {
            display: block;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f5e8;
            border-radius: 4px;
            display: none;
        }
        .result.show {
            display: block;
        }
        .material-info {
            margin-top: 20px;
            padding: 15px;
            background-color: #e3f2fd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ—ï¸ å»ºç¯‰ææ–™ç”¨é‡è¨ˆç®—å™¨</h1>
        
        <div class="calculator-selector">
            <label for="calcType">é¸æ“‡è¨ˆç®—é¡å‹:</label>
            <select id="calcType">
                <option value="">-- è«‹é¸æ“‡ --</option>
                <option value="concrete">æ··å‡åœŸç”¨é‡è¨ˆç®—</option>
                <option value="brick">ç£šå¡Šç”¨é‡è¨ˆç®—</option>
                <option value="tiles">ç“·ç£šç”¨é‡è¨ˆç®—</option>
                <option value="paint">æ²¹æ¼†ç”¨é‡è¨ˆç®—</option>
                <option value="flooring">åœ°æ¿ææ–™ç”¨é‡è¨ˆç®—</option>
                <option value="sand_cement">æ²™æ°´æ³¥ç”¨é‡è¨ˆç®—</option>
            </select>
        </div>
        
        <!-- æ··å‡åœŸè¨ˆç®—å™¨ -->
        <div id="concreteForm" class="calculator-form">
            <h3>æ··å‡åœŸç”¨é‡è¨ˆç®—</h3>
            <div class="form-group">
                <label for="concreteLength">é•·åº¦ (ç±³):</label>
                <input type="number" id="concreteLength" step="0.01" min="0">
            </div>
            <div class="form-group">
                <label for="concreteWidth">å¯¬åº¦ (ç±³):</label>
                <input type="number" id="concreteWidth" step="0.01" min="0">
            </div>
            <div class="form-group">
                <label for="concreteHeight">é«˜åº¦/åšåº¦ (ç±³):</label>
                <input type="number" id="concreteHeight" step="0.01" min="0">
            </div>
            <button onclick="calculateConcrete()">è¨ˆç®—æ··å‡åœŸç”¨é‡</button>
            
            <div id="concreteResult" class="result"></div>
        </div>
        
        <!-- ç£šå¡Šè¨ˆç®—å™¨ -->
        <div id="brickForm" class="calculator-form">
            <h3>ç£šå¡Šç”¨é‡è¨ˆç®—</h3>
            <div class="form-group">
                <label for="brickWallArea">ç‰†å£é¢ç© (å¹³æ–¹ç±³):</label>
                <input type="number" id="brickWallArea" step="0.01" min="0">
            </div>
            <div class="form-group">
                <label for="brickType">ç£šå¡Šé¡å‹:</label>
                <select id="brickType">
                    <option value="standard">æ¨™æº–ç£š (230Ã—110Ã—76mm)</option>
                    <option value="hollow">ç©ºå¿ƒç£š (230Ã—110Ã—150mm)</option>
                    <option value="solid">å¯¦å¿ƒç£š (230Ã—110Ã—110mm)</option>
                </select>
            </div>
            <button onclick="calculateBrick()">è¨ˆç®—ç£šå¡Šç”¨é‡</button>
            
            <div id="brickResult" class="result"></div>
        </div>
        
        <!-- ç“·ç£šè¨ˆç®—å™¨ -->
        <div id="tilesForm" class="calculator-form">
            <h3>ç“·ç£šç”¨é‡è¨ˆç®—</h3>
            <div class="form-group">
                <label for="tilesArea">é‹ªè¨­é¢ç© (å¹³æ–¹ç±³):</label>
                <input type="number" id="tilesArea" step="0.01" min="0">
            </div>
            <div class="form-group">
                <label for="tileSize">ç“·ç£šå°ºå¯¸ (å˜ç±³ Ã— å˜ç±³):</label>
                <input type="text" id="tileSize" placeholder="ä¾‹å¦‚: 30x30 æˆ– 60x60">
            </div>
            <div class="form-group">
                <label for="wastagePercent">æè€—ç‡ (%):</label>
                <input type="number" id="wastagePercent" value="5" min="0" max="20">
            </div>
            <button onclick="calculateTiles()">è¨ˆç®—ç“·ç£šç”¨é‡</button>
            
            <div id="tilesResult" class="result"></div>
        </div>
        
        <!-- æ²¹æ¼†è¨ˆç®—å™¨ -->
        <div id="paintForm" class="calculator-form">
            <h3>æ²¹æ¼†ç”¨é‡è¨ˆç®—</h3>
            <div class="form-group">
                <label for="paintArea">å¡—åˆ·é¢ç© (å¹³æ–¹ç±³):</label>
                <input type="number" id="paintArea" step="0.01" min="0">
            </div>
            <div class="form-group">
                <label for="paintLayers">å¡—åˆ·å±¤æ•¸:</label>
                <input type="number" id="paintLayers" value="2" min="1" max="5">
            </div>
            <div class="form-group">
                <label for="paintCoverage">æ¯å‡æ²¹æ¼†è¦†è“‹é¢ç© (å¹³æ–¹ç±³/å‡):</label>
                <input type="number" id="paintCoverage" value="10" step="0.1" min="1">
            </div>
            <button onclick="calculatePaint()">è¨ˆç®—æ²¹æ¼†ç”¨é‡</button>
            
            <div id="paintResult" class="result"></div>
        </div>
        
        <!-- åœ°æ¿ææ–™è¨ˆç®—å™¨ -->
        <div id="flooringForm" class="calculator-form">
            <h3>åœ°æ¿ææ–™ç”¨é‡è¨ˆç®—</h3>
            <div class="form-group">
                <label for="flooringArea">é‹ªè¨­é¢ç© (å¹³æ–¹ç±³):</label>
                <input type="number" id="flooringArea" step="0.01" min="0">
            </div>
            <div class="form-group">
                <label for="flooringType">åœ°æ¿é¡å‹:</label>
                <select id="flooringType">
                    <option value="wood">æœ¨åœ°æ¿</option>
                    <option value="laminate">è¤‡åˆåœ°æ¿</option>
                    <option value="vinyl">ä¹™çƒ¯åŸºåœ°æ¿</option>
                </select>
            </div>
            <div class="form-group">
                <label for="flooringWastage">æè€—ç‡ (%):</label>
                <input type="number" id="flooringWastage" value="7" min="0" max="20">
            </div>
            <button onclick="calculateFlooring()">è¨ˆç®—åœ°æ¿ç”¨é‡</button>
            
            <div id="flooringResult" class="result"></div>
        </div>
        
        <!-- æ²™æ°´æ³¥è¨ˆç®—å™¨ -->
        <div id="sandCementForm" class="calculator-form">
            <h3>æ²™æ°´æ³¥ç”¨é‡è¨ˆç®—</h3>
            <div class="form-group">
                <label for="sandCementVolume">æ‰€éœ€ç ‚æ¼¿é«”ç© (ç«‹æ–¹ç±³):</label>
                <input type="number" id="sandCementVolume" step="0.01" min="0">
            </div>
            <div class="form-group">
                <label for="mixRatio">æ··åˆæ¯”ä¾‹ (æ°´æ³¥:æ²™):</label>
                <select id="mixRatio">
                    <option value="1:3">1:3 (æ°´æ³¥:æ²™) - ç Œç£šç”¨</option>
                    <option value="1:4">1:4 (æ°´æ³¥:æ²™) - ä¸€èˆ¬æŠ¹ç°</option>
                    <option value="1:5">1:5 (æ°´æ³¥:æ²™) - è¼•è² è·æŠ¹ç°</option>
                    <option value="1:6">1:6 (æ°´æ³¥:æ²™) - å…§ç‰†æŠ¹ç°</option>
                </select>
            </div>
            <button onclick="calculateSandCement()">è¨ˆç®—æ²™æ°´æ³¥ç”¨é‡</button>
            
            <div id="sandCementResult" class="result"></div>
        </div>
        
        <div class="material-info">
            <h3>ğŸ’¡ ä½¿ç”¨èªªæ˜</h3>
            <ul>
                <li>å¾ä¸‹æ‹‰èœå–®ä¸­é¸æ“‡æ‰€éœ€çš„è¨ˆç®—é¡å‹</li>
                <li>å¡«å…¥ç›¸é—œçš„å°ºå¯¸æˆ–é¢ç©æ•¸æ“š</li>
                <li>é»æ“Šè¨ˆç®—æŒ‰éˆ•ç²å¾—çµæœ</li>
                <li>çµæœå·²è€ƒæ…®å¸¸è¦æè€—å’Œæ–½å·¥éœ€æ±‚</li>
            </ul>
        </div>
    </div>

    <script>
        // é¡¯ç¤ºç›¸æ‡‰çš„è¨ˆç®—è¡¨å–®
        document.getElementById('calcType').addEventListener('change', function() {
            // éš±è—æ‰€æœ‰è¡¨å–®
            const forms = document.querySelectorAll('.calculator-form');
            forms.forEach(form => form.classList.remove('active'));
            
            // é¡¯ç¤ºé¸ä¸­çš„è¡¨å–®
            const selectedValue = this.value;
            if (selectedValue) {
                document.getElementById(selectedValue + 'Form').classList.add('active');
            }
        });

        // æ··å‡åœŸç”¨é‡è¨ˆç®—
        function calculateConcrete() {
            const length = parseFloat(document.getElementById('concreteLength').value);
            const width = parseFloat(document.getElementById('concreteWidth').value);
            const height = parseFloat(document.getElementById('concreteHeight').value);
            
            if (isNaN(length) || isNaN(width) || isNaN(height) || length <= 0 || width <= 0 || height <= 0) {
                alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„å°ºå¯¸å€¼');
                return;
            }
            
            const volume = length * width * height;
            const cement = volume * 320; // kg (ç´„æ¯ç«‹æ–¹å…¬å°º320kgæ°´æ³¥)
            const sand = volume * 0.5; // ç«‹æ–¹å…¬å°º
            const gravel = volume * 1.0; // ç«‹æ–¹å…¬å°º
            const water = volume * 180; // å‡
            
            const resultDiv = document.getElementById('concreteResult');
            resultDiv.innerHTML = `
                <h4>è¨ˆç®—çµæœ:</h4>
                <p><strong>æ··å‡åœŸé«”ç©:</strong> ${volume.toFixed(2)} ç«‹æ–¹å…¬å°º</p>
                <p><strong>æ‰€éœ€ææ–™:</strong></p>
                <ul>
                    <li>æ°´æ³¥: ${cement.toFixed(2)} å…¬æ–¤</li>
                    <li>æ²™: ${sand.toFixed(2)} ç«‹æ–¹å…¬å°º</li>
                    <li>ç¢çŸ³: ${gravel.toFixed(2)} ç«‹æ–¹å…¬å°º</li>
                    <li>æ°´: ${water.toFixed(2)} å‡</li>
                </ul>
                <p><small>æ³¨æ„: ä»¥ä¸Šç‚ºæ¨™æº–C20æ··å‡åœŸé…åˆæ¯”ä¼°ç®—ï¼Œå¯¦éš›ç”¨é‡å¯èƒ½å› è¨­è¨ˆè¦æ±‚æœ‰æ‰€ä¸åŒ</small></p>
            `;
            resultDiv.classList.add('show');
        }

        // ç£šå¡Šç”¨é‡è¨ˆç®—
        function calculateBrick() {
            const area = parseFloat(document.getElementById('brickWallArea').value);
            const brickType = document.getElementById('brickType').value;
            
            if (isNaN(area) || area <= 0) {
                alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„é¢ç©å€¼');
                return;
            }
            
            let bricksPerSqM;
            switch(brickType) {
                case 'standard':
                    bricksPerSqM = 60; // æ¨™æº–ç£šæ¯å¹³æ–¹å…¬å°ºç´„60å¡Š
                    break;
                case 'hollow':
                    bricksPerSqM = 35; // ç©ºå¿ƒç£šæ¯å¹³æ–¹å…¬å°ºç´„35å¡Š
                    break;
                case 'solid':
                    bricksPerSqM = 45; // å¯¦å¿ƒç£šæ¯å¹³æ–¹å…¬å°ºç´„45å¡Š
                    break;
                default:
                    bricksPerSqM = 60;
            }
            
            const bricksNeeded = Math.ceil(area * bricksPerSqM * 1.05); // åŠ 5%æè€—
            
            const resultDiv = document.getElementById('brickResult');
            resultDiv.innerHTML = `
                <h4>è¨ˆç®—çµæœ:</h4>
                <p><strong>ç‰†å£é¢ç©:</strong> ${area} å¹³æ–¹å…¬å°º</p>
                <p><strong>æ‰€éœ€ç£šå¡Šæ•¸é‡:</strong> ${bricksNeeded} å¡Š</p>
                <p><small>(å·²åŒ…å«5%æè€—åŠæ–½å·¥éœ€æ±‚)</small></p>
            `;
            resultDiv.classList.add('show');
        }

        // ç“·ç£šç”¨é‡è¨ˆç®—
        function calculateTiles() {
            const area = parseFloat(document.getElementById('tilesArea').value);
            const tileSizeStr = document.getElementById('tileSize').value;
            const wastagePercent = parseFloat(document.getElementById('wastagePercent').value) || 5;
            
            if (isNaN(area) || area <= 0) {
                alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„é¢ç©å€¼');
                return;
            }
            
            if (!tileSizeStr) {
                alert('è«‹è¼¸å…¥ç“·ç£šå°ºå¯¸ (ä¾‹å¦‚: 30x30)');
                return;
            }
            
            const sizeParts = tileSizeStr.split('x');
            if (sizeParts.length !== 2) {
                alert('ç“·ç£šå°ºå¯¸æ ¼å¼éŒ¯èª¤ï¼Œè«‹ä½¿ç”¨ "é•·xå¯¬" æ ¼å¼ (ä¾‹å¦‚: 30x30)');
                return;
            }
            
            const length = parseFloat(sizeParts[0]) / 100; // è½‰æ›ç‚ºç±³
            const width = parseFloat(sizeParts[1]) / 100; // è½‰æ›ç‚ºç±³
            
            if (isNaN(length) || isNaN(width) || length <= 0 || width <= 0) {
                alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„ç“·ç£šå°ºå¯¸');
                return;
            }
            
            const tileArea = length * width;
            const tilesNeeded = Math.ceil((area / tileArea) * (1 + wastagePercent / 100));
            
            const resultDiv = document.getElementById('tilesResult');
            resultDiv.innerHTML = `
                <h4>è¨ˆç®—çµæœ:</h4>
                <p><strong>é‹ªè¨­é¢ç©:</strong> ${area} å¹³æ–¹å…¬å°º</p>
                <p><strong>ç“·ç£šå°ºå¯¸:</strong> ${length*100}cm Ã— ${width*100}cm</p>
                <p><strong>ç“·ç£šé¢ç©:</strong> ${tileArea.toFixed(4)} å¹³æ–¹å…¬å°º</p>
                <p><strong>æ‰€éœ€ç“·ç£šæ•¸é‡:</strong> ${tilesNeeded} å¡Š</p>
                <p><small>(å·²åŒ…å«${wastagePercent}%æè€—åŠåˆ‡å‰²éœ€æ±‚)</small></p>
            `;
            resultDiv.classList.add('show');
        }

        // æ²¹æ¼†ç”¨é‡è¨ˆç®—
        function calculatePaint() {
            const area = parseFloat(document.getElementById('paintArea').value);
            const layers = parseInt(document.getElementById('paintLayers').value) || 2;
            const coverage = parseFloat(document.getElementById('paintCoverage').value) || 10;
            
            if (isNaN(area) || area <= 0) {
                alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„é¢ç©å€¼');
                return;
            }
            
            const paintNeeded = (area * layers) / coverage;
            
            const resultDiv = document.getElementById('paintResult');
            resultDiv.innerHTML = `
                <h4>è¨ˆç®—çµæœ:</h4>
                <p><strong>å¡—åˆ·é¢ç©:</strong> ${area} å¹³æ–¹å…¬å°º</p>
                <p><strong>å¡—åˆ·å±¤æ•¸:</strong> ${layers} å±¤</p>
                <p><strong>æ¯å‡è¦†è“‹é¢ç©:</strong> ${coverage} å¹³æ–¹å…¬å°º</p>
                <p><strong>æ‰€éœ€æ²¹æ¼†:</strong> ${paintNeeded.toFixed(2)} å‡</p>
                <p><small>å»ºè­°å¤šé ç•™10-15%ä»¥ç¢ºä¿å……è¶³</small></p>
            `;
            resultDiv.classList.add('show');
        }

        // åœ°æ¿ææ–™ç”¨é‡è¨ˆç®—
        function calculateFlooring() {
            const area = parseFloat(document.getElementById('flooringArea').value);
            const flooringType = document.getElementById('flooringType').value;
            const wastage = parseFloat(document.getElementById('flooringWastage').value) || 7;
            
            if (isNaN(area) || area <= 0) {
                alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„é¢ç©å€¼');
                return;
            }
            
            const totalArea = area * (1 + wastage / 100);
            const packsNeeded = Math.ceil(totalArea); // å‡è¨­æ¯åŒ…è¦†è“‹1å¹³æ–¹ç±³ï¼Œå¯¦éš›æœƒæ ¹æ“šç”¢å“èª¿æ•´
            
            const resultDiv = document.getElementById('flooringResult');
            resultDiv.innerHTML = `
                <h4>è¨ˆç®—çµæœ:</h4>
                <p><strong>é‹ªè¨­é¢ç©:</strong> ${area} å¹³æ–¹å…¬å°º</p>
                <p><strong>æè€—ç‡:</strong> ${wastage}%</p>
                <p><strong>æ‰€éœ€ææ–™é¢ç©:</strong> ${totalArea.toFixed(2)} å¹³æ–¹å…¬å°º</p>
                <p><small>(å·²åŒ…å«${wastage}%æè€—åŠè£åˆ‡éœ€æ±‚)</small></p>
            `;
            resultDiv.classList.add('show');
        }

        // æ²™æ°´æ³¥ç”¨é‡è¨ˆç®—
        function calculateSandCement() {
            const volume = parseFloat(document.getElementById('sandCementVolume').value);
            const ratioStr = document.getElementById('mixRatio').value;
            
            if (isNaN(volume) || volume <= 0) {
                alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„é«”ç©å€¼');
                return;
            }
            
            const ratioParts = ratioStr.split(':');
            const cementRatio = parseFloat(ratioParts[0]);
            const sandRatio = parseFloat(ratioParts[1]);
            const totalRatio = cementRatio + sandRatio;
            
            const cementVolume = (cementRatio / totalRatio) * volume;
            const sandVolume = (sandRatio / totalRatio) * volume;
            
            // å‡è¨­æ°´æ³¥å¯†åº¦ç‚º1440 kg/mÂ³
            const cementWeight = cementVolume * 1440;
            const cementBags = Math.ceil(cementWeight / 50); // 50kgä¸€åŒ…
            
            const resultDiv = document.getElementById('sandCementResult');
            resultDiv.innerHTML = `
                <h4>è¨ˆç®—çµæœ:</h4>
                <p><strong>ç ‚æ¼¿é«”ç©:</strong> ${volume} ç«‹æ–¹å…¬å°º</p>
                <p><strong>æ··åˆæ¯”ä¾‹:</strong> ${ratioStr}</p>
                <p><strong>æ‰€éœ€ææ–™:</strong></p>
                <ul>
                    <li>æ°´æ³¥: ${cementWeight.toFixed(2)} å…¬æ–¤ (${cementBags} åŒ…)</li>
                    <li>æ²™: ${sandVolume.toFixed(2)} ç«‹æ–¹å…¬å°º</li>
                </ul>
                <p><small>æ³¨æ„: ä»¥ä¸Šç‚ºä¼°ç®—å€¼ï¼Œå¯¦éš›ç”¨é‡å¯èƒ½å› æ–½å·¥æ¢ä»¶æœ‰æ‰€å·®ç•°</small></p>
            `;
            resultDiv.classList.add('show');
        }

        // PWA Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('../sw.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>