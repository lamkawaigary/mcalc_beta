<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta href="content" content="0">
    <title>å»ºç¯‰ææ–™ç”¨é‡è¨ˆç®—å™¨ - mcalc_beta</title>
    <link rel="manifest" href="../manifest.json">
    <link rel="icon" type="image/x-icon" href="../favicon.ico">
    <style>
        /* iOS 26 é¢¨æ ¼è¨­è¨ˆ - èˆ‡é¦–é çµ±ä¸€ */
        * {
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* æ‰“å°æ¨£å¼ - ç”¨æ–¼PDFåŒ¯å‡º */
        @media print {
            body { background: white; }
            .container { box-shadow: none; max-width: 100%; }
            .no-print { display: none !important; }
            .result { border: 1px solid #ccc; }
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #1a1a2e;
            min-height: 100vh;
            padding: 20px 10px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 420px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 25px 20px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(0,0,0,0.08);
        }
        
        .back-btn {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: rgba(255,255,255,0.8);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            text-decoration: none;
            color: #1a1a2e;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            background: rgba(52, 152, 219, 0.2);
        }
        
        header h1 {
            flex: 1;
            margin: 0;
            font-size: 20px;
            font-weight: 600;
            color: #1a1a2e;
        }
        
        .section-title {
            font-size: 13px;
            font-weight: 600;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 20px 0 15px 0;
            padding-left: 5px;
            border-left: 3px solid #e74c3c;
        }
        
        .calculator-form {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            animation: fadeIn 0.3s ease-out;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        
        .calculator-form.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-group {
            margin-bottom: 18px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #1a1a2e;
            font-size: 15px;
        }
        
        select, input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            color: #1a1a2e;
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.04);
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: #e74c3c;
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.15), inset 0 2px 4px rgba(0,0,0,0.04);
        }
        
        .calc-btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 14px;
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }
        
        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
        }
        
        .result {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.15) 0%, rgba(39, 174, 96, 0.15) 100%);
            border-radius: 14px;
            display: none;
            border: 1px solid rgba(46, 204, 113, 0.3);
        }
        
        .result.show {
            display: block;
        }
        
        .result h3 {
            margin: 0 0 15px 0;
            color: #27ae60;
            font-size: 18px;
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .result-item:last-child {
            border-bottom: none;
        }
        
        .info-box {
            margin-top: 20px;
            padding: 16px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 12px;
            border-left: 3px solid #3498db;
        }
        
        .info-box h4 {
            margin: 0 0 10px 0;
            color: #2980b9;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .info-box ul {
            margin: 0;
            padding-left: 20px;
            color: #5d6d7e;
            font-size: 14px;
            line-height: 1.8;
        }
        
        footer {
            text-align: center;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid rgba(0,0,0,0.08);
        }
        
        .version-info {
            font-size: 12px;
            color: #6c757d;
        }
        
        .version-info a {
            color: #3498db;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="../index.html" class="back-btn">â†</a>
            <h1>ğŸ—ï¸ å»ºç¯‰ææ–™è¨ˆç®—å™¨</h1>
        </header>
        
        <div class="form-group">
            <label for="calcType">é¸æ“‡è¨ˆç®—é¡å‹</label>
            <select id="calcType">
                <option value="">-- è«‹é¸æ“‡ --</option>
                <option value="concrete">æ··å‡åœŸç”¨é‡è¨ˆç®—</option>
                <option value="brick">ç£šå¡Šç”¨é‡è¨ˆç®—</option>
                <option value="tiles">ç“·ç£šç”¨é‡è¨ˆç®—</option>
                <option value="paint">æ²¹æ¼†ç”¨é‡è¨ˆç®—</option>
                <option value="flooring">åœ°æ¿ææ–™è¨ˆç®—</option>
                <option value="selfleveling">è‡ªæµå¹³ææ–™è¨ˆç®—</option>
            </select>
        </div>
        
        <!-- æ··å‡åœŸè¨ˆç®—è¡¨å–® -->
        <div id="concrete" class="calculator-form">
            <div class="form-group">
                <label for="concreteLength">é•·åº¦ (ç±³)</label>
                <input type="number" id="concreteLength" placeholder="è¼¸å…¥æ•¸å€¼" step="0.01">
            </div>
            <div class="form-group">
                <label for="concreteWidth">é—Šåº¦ (ç±³)</label>
                <input type="number" id="concreteWidth" placeholder="è¼¸å…¥æ•¸å€¼" step="0.01">
            </div>
            <div class="form-group">
                <label for="concreteDepth">æ·±åº¦ (å˜ç±³)</label>
                <input type="number" id="concreteDepth" placeholder="è¼¸å…¥æ•¸å€¼" step="0.1">
            </div>
            <button class="calc-btn" onclick="calculateConcrete()">è¨ˆç®—</button>
            
            <div id="concreteResult" class="result">
                <h3>ğŸ“Š è¨ˆç®—çµæœ</h3>
                <div class="result-item">
                    <span>æ‰€éœ€æ··å‡åœŸé«”ç©</span>
                    <span id="concreteVolume">0 mÂ³</span>
                </div>
                <div class="result-item">
                    <span>å»ºè­°è³¼è²·é‡ (+10%)</span>
                    <span id="concreteBuy">0 mÂ³</span>
                </div>
                
                <!-- åˆ†äº«æŒ‰éˆ• -->
                <div class="result-actions no-print" style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="action-btn share" onclick="shareResult('concrete')" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“¤ åˆ†äº«</button>
                    <button class="action-btn csv" onclick="downloadCSV('concrete')" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“Š CSV</button>
                    <button class="action-btn pdf" onclick="printPDF()" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“„ PDF</button>
                </div>
            </div>
            
            <div class="info-box">
                <h4>ğŸ’¡ ä½¿ç”¨èªªæ˜</h4>
                <ul>
                    <li>è¼¸å…¥æ··å‡åœŸæ¿/ç‰†çš„é•·åº¦ã€é—Šåº¦å’Œæ·±åº¦</li>
                    <li>ç³»çµ±æœƒè‡ªå‹•è¨ˆç®—æ‰€éœ€æ··å‡åœŸé«”ç©</li>
                    <li>çµæœå·²åŒ…å«æ­£å¸¸æè€— (+10%)</li>
                </ul>
            </div>
        </div>
        
        <!-- ç£šå¡Šè¨ˆç®—è¡¨å–® -->
        <div id="brick" class="calculator-form">
            <div class="form-group">
                <label for="brickLength">ç‰†èº«é•·åº¦ (ç±³)</label>
                <input type="number" id="brickLength" placeholder="è¼¸å…¥æ•¸å€¼" step="0.01">
            </div>
            <div class="form-group">
                <label for="brickHeight">ç‰†èº«é«˜åº¦ (ç±³)</label>
                <input type="number" id="brickHeight" placeholder="è¼¸å…¥æ•¸å€¼" step="0.01">
            </div>
            <div class="form-group">
                <label for="brickType">ç£šå¡Šé¡å‹</label>
                <select id="brickType">
                    <option value="0.2">æ¨™æº–ç£š (200Ã—100Ã—50mm)</option>
                    <option value="0.23">ä¸­å‹ç£š (230Ã—110Ã—76mm)</option>
                    <option value="0.3">å¤§å‹ç£š (300Ã—200Ã—100mm)</option>
                </select>
            </div>
            <button class="calc-btn" onclick="calculateBrick()">è¨ˆç®—</button>
            
            <div id="brickResult" class="result">
                <h3>ğŸ“Š è¨ˆç®—çµæœ</h3>
                <div class="result-item">
                    <span>æ‰€éœ€ç£šå¡Šæ•¸é‡</span>
                    <span id="brickCount">0 å¡Š</span>
                </div>
                <div class="result-item">
                    <span>å»ºè­°è³¼è²·é‡ (+5%)</span>
                    <span id="brickBuy">0 å¡Š</span>
                </div>
                
                <!-- åˆ†äº«æŒ‰éˆ• -->
                <div class="result-actions no-print" style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="action-btn share" onclick="shareResult('brick')" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“¤ åˆ†äº«</button>
                    <button class="action-btn csv" onclick="downloadCSV('brick')" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“Š CSV</button>
                    <button class="action-btn pdf" onclick="printPDF()" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“„ PDF</button>
                </div>
            </div>
            
            <div class="info-box">
                <h4>ğŸ’¡ ä½¿ç”¨èªªæ˜</h4>
                <ul>
                    <li>è¼¸å…¥ç‰†èº«çš„é•·åº¦å’Œé«˜åº¦</li>
                    <li>é¸æ“‡æ‰€éœ€çš„ç£šå¡Šé¡å‹</li>
                    <li>ç³»çµ±æœƒè¨ˆç®—æ‰€éœ€ç£šå¡Šæ•¸é‡ (å·²åŒ…å«ç°å£åšåº¦)</li>
                </ul>
            </div>
        </div>
        
        <!-- ç“·ç£šè¨ˆç®—è¡¨å–® -->
        <div id="tiles" class="calculator-form">
            <div class="form-group">
                <label for="tilesArea">é‹ªè¨­é¢ç© (å¹³æ–¹ç±³)</label>
                <input type="number" id="tilesArea" placeholder="è¼¸å…¥æ•¸å€¼" step="0.01">
            </div>
            <div class="form-group">
                <label for="tilesSize">ç“·ç£šå°ºå¯¸</label>
                <select id="tilesSize">
                    <option value="0.01">300Ã—300mm (0.09 mÂ²)</option>
                    <option value="0.036">600Ã—600mm (0.36 mÂ²)</option>
                    <option value="0.04">400Ã—1000mm (0.4 mÂ²)</option>
                    <option value="custom">è‡ªè¨‚å°ºå¯¸</option>
                </select>
            </div>
            <button class="calc-btn" onclick="calculateTiles()">è¨ˆç®—</button>
            
            <div id="tilesResult" class="result">
                <h3>ğŸ“Š è¨ˆç®—çµæœ</h3>
                <div class="result-item">
                    <span>æ‰€éœ€ç“·ç£šæ•¸é‡</span>
                    <span id="tilesCount">0 å¡Š</span>
                </div>
                <div class="result-item">
                    <span>å»ºè­°è³¼è²·é‡ (+8%)</span>
                    <span id="tilesBuy">0 å¡Š</span>
                </div>
                
                <!-- åˆ†äº«æŒ‰éˆ• -->
                <div class="result-actions no-print" style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="action-btn share" onclick="shareResult('tiles')" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“¤ åˆ†äº«</button>
                    <button class="action-btn csv" onclick="downloadCSV('tiles')" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“Š CSV</button>
                    <button class="action-btn pdf" onclick="printPDF()" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“„ PDF</button>
                </div>
            </div>
            
            <div class="info-box">
                <h4>ğŸ’¡ ä½¿ç”¨èªªæ˜</h4>
                <ul>
                    <li>è¼¸å…¥éœ€è¦é‹ªè¨­çš„ç¸½é¢ç©</li>
                    <li>é¸æ“‡ç“·ç£šå°ºå¯¸æˆ–è¼¸å…¥è‡ªè¨‚å°ºå¯¸</li>
                    <li>çµæœå·²åŒ…å«æ­£å¸¸æè€— (+8%)</li>
                </ul>
            </div>
        </div>
        
        <!-- æ²¹æ¼†è¨ˆç®—è¡¨å–® -->
        <div id="paint" class="calculator-form">
            <div class="form-group">
                <label for="paintArea">éœ€è¦æ²¹æ¼†çš„é¢ç© (å¹³æ–¹ç±³)</label>
                <input type="number" id="paintArea" placeholder="è¼¸å…¥æ•¸å€¼" step="0.1">
            </div>
            <div class="form-group">
                <label for="paintCoats">å¡—å±¤æ¬¡æ•¸</label>
                <select id="paintCoats">
                    <option value="1">1 åº¦</option>
                    <option value="2" selected>2 åº¦ (æ¨™æº–)</option>
                    <option value="3">3 åº¦</option>
                </select>
            </div>
            <button class="calc-btn" onclick="calculatePaint()">è¨ˆç®—</button>
            
            <div id="paintResult" class="result">
                <h3>ğŸ“Š è¨ˆç®—çµæœ</h3>
                <div class="result-item">
                    <span>æ‰€éœ€æ²¹æ¼†é‡ (æ¯å±¤)</span>
                    <span id="paintLitres">0 L</span>
                </div>
                <div class="result-item">
                    <span>ç¸½éœ€æ±‚é‡ (å…¨éƒ¨å¡—å±¤)</span>
                    <span id="paintTotal">0 L</span>
                </div>
                
                <!-- åˆ†äº«æŒ‰éˆ• -->
                <div class="result-actions no-print" style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="action-btn share" onclick="shareResult('paint')" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“¤ åˆ†äº«</button>
                    <button class="action-btn csv" onclick="downloadCSV('paint')" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“Š CSV</button>
                    <button class="action-btn pdf" onclick="printPDF()" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“„ PDF</button>
                </div>
            </div>
            
            <div class="info-box">
                <h4>ğŸ’¡ ä½¿ç”¨èªªæ˜</h4>
                <ul>
                    <li>è¼¸å…¥éœ€è¦æ²¹æ¼†çš„ç¸½é¢ç©</li>
                    <li>é¸æ“‡å¡—å±¤æ¬¡æ•¸ (ä¸€èˆ¬ç‰†èº«å»ºè­° 2 åº¦)</li>
                    <li>çµæœæŒ‰æ¯å‡æ²¹æ¼†å¯å¡—åˆ· 10-12å¹³æ–¹ç±³è¨ˆç®—</li>
                </ul>
            </div>
        </div>
        
        <!-- åœ°æ¿ææ–™è¨ˆç®—è¡¨å–® -->
        <div id="flooring" class="calculator-form">
            <div class="form-group">
                <label for="flooringLength">æˆ¿é–“é•·åº¦ (ç±³)</label>
                <input type="number" id="flooringLength" placeholder="è¼¸å…¥æ•¸å€¼" step="0.01">
            </div>
            <div class="form-group">
                <label for="flooringWidth">æˆ¿é–“é—Šåº¦ (ç±³)</label>
                <input type="number" id="flooringWidth" placeholder="è¼¸å…¥æ•¸å€¼" step="0.01">
            </div>
            <div class="form-group">
                <label for="flooringType">åœ°æ¿é¡å‹</label>
                <select id="flooringType">
                    <option value="0.12">å¯¦æœ¨åœ°æ¿ (æ¯å¡Š 0.12 mÂ²)</option>
                    <option value="0.18">è¤‡åˆåœ°æ¿ (æ¯å¡Š 0.18 mÂ²)</option>
                    <option value="0.2">ç“·ç£šåœ°æ¿ (æ¯å¡Š 0.2 mÂ²)</option>
                </select>
            </div>
            <button class="calc-btn" onclick="calculateFlooring()">è¨ˆç®—</button>
            
            <div id="flooringResult" class="result">
                <h3>ğŸ“Š è¨ˆç®—çµæœ</h3>
                <div class="result-item">
                    <span>æˆ¿é–“ç¸½é¢ç©</span>
                    <span id="flooringArea">0 mÂ²</span>
                </div>
                <div class="result-item">
                    <span>æ‰€éœ€åœ°æ¿æ•¸é‡ (+8%)</span>
                    <span id="flooringCount">0 å¡Š</span>
                </div>
                
                <!-- åˆ†äº«æŒ‰éˆ• -->
                <div class="result-actions no-print" style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="action-btn share" onclick="shareResult('flooring')" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“¤ åˆ†äº«</button>
                    <button class="action-btn csv" onclick="downloadCSV('flooring')" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“Š CSV</button>
                    <button class="action-btn pdf" onclick="printPDF()" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“„ PDF</button>
                </div>
            </div>
            
            <div class="info-box">
                <h4>ğŸ’¡ ä½¿ç”¨èªªæ˜</h4>
                <ul>
                    <li>è¼¸å…¥æˆ¿é–“çš„é•·åº¦å’Œé—Šåº¦</li>
                    <li>é¸æ“‡åœ°æ¿é¡å‹</li>
                    <li>çµæœå·²åŒ…å«æ­£å¸¸æè€— (+8%)</li>
                </ul>
            </div>
        </div>
        
        <!-- è‡ªæµå¹³è¨ˆç®—è¡¨å–® -->
        <div id="selfleveling" class="calculator-form">
            <div class="form-group">
                <label for="selfLevelArea">æ–½å·¥é¢ç© (å¹³æ–¹ç±³)</label>
                <input type="number" id="selfLevelArea" placeholder="è¼¸å…¥æ•¸å€¼" step="0.1">
            </div>
            <div class="form-group">
                <label for="selfLevelThickness">æ–½å·¥åšåº¦ (æ¯«ç±³)</label>
                <input type="number" id="selfLevelThickness" placeholder="å»ºè­° 3-10mm" step="0.5">
            </div>
            <button class="calc-btn" onclick="calculateSelfLeveling()">è¨ˆç®—</button>
            
            <div id="selfLevelResult" class="result">
                <h3>ğŸ“Š è¨ˆç®—çµæœ</h3>
                <div class="result-item">
                    <span>æ–½å·¥é¢ç©</span>
                    <span id="selfLevelAreaResult">0 mÂ²</span>
                </div>
                <div class="result-item">
                    <span>æ–½å·¥åšåº¦</span>
                    <span id="selfLevelThicknessResult">0 mm</span>
                </div>
                <div class="result-item">
                    <span>æ‰€éœ€è‡ªæµå¹³ææ–™</span>
                    <span id="selfLevelWeight">0 kg</span>
                </div>
                <div class="result-item">
                    <span>å»ºè­°è³¼è²· (25kg/åŒ…)</span>
                    <span id="selfLevelBags">0 åŒ…</span>
                </div>
                
                <!-- åˆ†äº«æŒ‰éˆ• -->
                <div class="result-actions no-print" style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="action-btn share" onclick="shareResult('selfleveling')" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“¤ åˆ†äº«</button>
                    <button class="action-btn csv" onclick="downloadCSV('selfleveling')" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“Š CSV</button>
                    <button class="action-btn pdf" onclick="printPDF()" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; font-size: 14px; font-weight: 600; cursor: pointer;">ğŸ“„ PDF</button>
                </div>
            </div>
            
            <div class="info-box">
                <h4>ğŸ’¡ ä½¿ç”¨èªªæ˜</h4>
                <ul>
                    <li>è¼¸å…¥éœ€è¦æ–½å·¥çš„ç¸½é¢ç©</li>
                    <li>è¼¸å…¥æ–½å·¥åšåº¦ (ä¸€èˆ¬ 3-10mm)</li>
                    <li>ç³»çµ±æŒ‰å¯†åº¦ç³»æ•¸ 1.8kg/mm/mÂ² è¨ˆç®—</li>
                    <li>çµæœå·²åŒ…å« 5% æ–½å·¥æè€—</li>
                </ul>
            </div>
        </div>
        
        <footer>
            <p class="version-info">
                <a href="../index.html">â† è¿”å›ä¸»é </a>
            </p>
        </footer>
    </div>
    
    <script>
        // è¨ˆç®—å™¨é¸æ“‡
        document.getElementById('calcType').addEventListener('change', function() {
            const type = this.value;
            const forms = document.querySelectorAll('.calculator-form');
            forms.forEach(form => form.classList.remove('active'));
            if (type && document.getElementById(type)) {
                document.getElementById(type).classList.add('active');
                // æ¸…é™¤ä¹‹å‰çµæœ
                const result = document.getElementById(type + 'Result');
                result.classList.remove('show');
            }
        });
        
        // æ··å‡åœŸè¨ˆç®—
        function calculateConcrete() {
            const length = parseFloat(document.getElementById('concreteLength').value) || 0;
            const width = parseFloat(document.getElementById('concreteWidth').value) || 0;
            const depth = parseFloat(document.getElementById('concreteDepth').value) || 0;
            
            const volume = length * width * (depth / 100);
            const buy = volume * 1.1;
            
            document.getElementById('concreteVolume').textContent = volume.toFixed(2) + ' mÂ³';
            document.getElementById('concreteBuy').textContent = buy.toFixed(2) + ' mÂ³';
            document.getElementById('concreteResult').classList.add('show');
        }
        
        // ç£šå¡Šè¨ˆç®—
        function calculateBrick() {
            const length = parseFloat(document.getElementById('brickLength').value) || 0;
            const height = parseFloat(document.getElementById('brickHeight').value) || 0;
            const brickArea = parseFloat(document.getElementById('brickType').value);
            
            const totalArea = length * height;
            const bricksNeeded = Math.ceil(totalArea / brickArea);
            const buy = Math.ceil(bricksNeeded * 1.05);
            
            document.getElementById('brickCount').textContent = bricksNeeded.toLocaleString() + ' å¡Š';
            document.getElementById('brickBuy').textContent = buy.toLocaleString() + ' å¡Š';
            document.getElementById('brickResult').classList.add('show');
        }
        
        // ç“·ç£šè¨ˆç®—
        function calculateTiles() {
            const area = parseFloat(document.getElementById('tilesArea').value) || 0;
            const tileArea = parseFloat(document.getElementById('tilesSize').value);
            
            const tilesNeeded = Math.ceil(area / tileArea);
            const buy = Math.ceil(tilesNeeded * 1.08);
            
            document.getElementById('tilesCount').textContent = tilesNeeded.toLocaleString() + ' å¡Š';
            document.getElementById('tilesBuy').textContent = buy.toLocaleString() + ' å¡Š';
            document.getElementById('tilesResult').classList.add('show');
        }
        
        // æ²¹æ¼†è¨ˆç®—
        function calculatePaint() {
            const area = parseFloat(document.getElementById('paintArea').value) || 0;
            const coats = parseInt(document.getElementById('paintCoats').value);
            
            const perCoat = Math.ceil(area / 12);
            const total = perCoat * coats;
            
            document.getElementById('paintLitres').textContent = perCoat.toFixed(1) + ' L';
            document.getElementById('paintTotal').textContent = total.toFixed(1) + ' L';
            document.getElementById('paintResult').classList.add('show');
        }
        
        // åœ°æ¿è¨ˆç®—
        function calculateFlooring() {
            const length = parseFloat(document.getElementById('flooringLength').value) || 0;
            const width = parseFloat(document.getElementById('flooringWidth').value) || 0;
            const tileArea = parseFloat(document.getElementById('flooringType').value);
            
            const totalArea = length * width;
            const tilesNeeded = Math.ceil(totalArea / tileArea);
            const buy = Math.ceil(tilesNeeded * 1.08);
            
            document.getElementById('flooringArea').textContent = totalArea.toFixed(2) + ' mÂ²';
            document.getElementById('flooringCount').textContent = buy.toLocaleString() + ' å¡Š';
            document.getElementById('flooringResult').classList.add('show');
        }
        
        // è‡ªæµå¹³è¨ˆç®—
        function calculateSelfLeveling() {
            const area = parseFloat(document.getElementById('selfLevelArea').value) || 0;
            const thickness = parseFloat(document.getElementById('selfLevelThickness').value) || 0;
            
            // è‡ªæµå¹³å¯†åº¦ç³»æ•¸ (ç´„ 1.8kg/mm/mÂ²)
            const densityFactor = 1.8;
            const wastage = 1.05; // 5% æè€—
            
            const totalWeight = area * thickness * densityFactor * wastage;
            
            document.getElementById('selfLevelAreaResult').textContent = area.toFixed(2) + ' mÂ²';
            document.getElementById('selfLevelThicknessResult').textContent = thickness.toFixed(1) + ' mm';
            document.getElementById('selfLevelWeight').textContent = totalWeight.toFixed(1) + ' kg';
            document.getElementById('selfLevelBags').textContent = Math.ceil(totalWeight / 25).toLocaleString() + ' åŒ… (æ¯åŒ… 25kg)';
            document.getElementById('selfLevelResult').classList.add('show');
        }
        
        // ========== åˆ†äº«/åŒ¯å‡ºåŠŸèƒ½ ==========
        
        // ç”Ÿæˆçµæœæ–‡å­—
        function generateResultText(calcType) {
            const typeNames = {
                'concrete': 'æ··å‡åœŸç”¨é‡è¨ˆç®—',
                'brick': 'ç£šå¡Šç”¨é‡è¨ˆç®—',
                'tiles': 'ç“·ç£šç”¨é‡è¨ˆç®—',
                'paint': 'æ²¹æ¼†ç”¨é‡è¨ˆç®—',
                'flooring': 'åœ°æ¿ææ–™è¨ˆç®—',
                'selfleveling': 'è‡ªæµå¹³ææ–™è¨ˆç®—'
            };
            
            const date = new Date().toLocaleDateString('zh-HK');
            let text = `ğŸ—ï¸ mcalc_beta è¨ˆç®—çµæœ\n`;
            text += `ğŸ“… ${date}\n`;
            text += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
            text += `ğŸ”§ ${typeNames[calcType] || 'è¨ˆç®—çµæœ'}\n`;
            text += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
            
            // å–å¾—çµæœæ•¸å€¼
            const resultEl = document.getElementById(calcType + 'Result');
            const resultItems = resultEl.querySelectorAll('.result-item');
            
            resultItems.forEach(item => {
                const label = item.querySelector('span:first-child').textContent;
                const value = item.querySelector('span:last-child').textContent;
                text += `${label}: ${value}\n`;
            });
            
            text += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
            text += `Powered by mcalc_beta`;
            return text;
        }
        
        // ç”Ÿæˆ CSV å…§å®¹
        function generateCSV(calcType) {
            const typeNames = {
                'concrete': 'æ··å‡åœŸç”¨é‡è¨ˆç®—',
                'brick': 'ç£šå¡Šç”¨é‡è¨ˆç®—',
                'tiles': 'ç“·ç£šç”¨é‡è¨ˆç®—',
                'paint': 'æ²¹æ¼†ç”¨é‡è¨ˆç®—',
                'flooring': 'åœ°æ¿ææ–™è¨ˆç®—',
                'selfleveling': 'è‡ªæµå¹³ææ–™è¨ˆç®—'
            };
            
            const date = new Date().toISOString().split('T')[0];
            let csv = `mcalc_beta è¨ˆç®—çµæœ,${date}\n`;
            csv += `è¨ˆç®—é¡å‹,${typeNames[calcType] || calcType}\n`;
            csv += `é …ç›®,æ•¸å€¼\n`;
            
            const resultEl = document.getElementById(calcType + 'Result');
            const resultItems = resultEl.querySelectorAll('.result-item');
            
            resultItems.forEach(item => {
                const label = item.querySelector('span:first-child').textContent;
                const value = item.querySelector('span:last-child').textContent;
                csv += `"${label}","${value}"\n`;
            });
            
            return csv;
        }
        
        // åˆ†äº«åŠŸèƒ½ (Web Share API)
        async function shareResult(calcType) {
            const text = generateResultText(calcType);
            
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: 'mcalc_beta è¨ˆç®—çµæœ',
                        text: text
                    });
                } catch (err) {
                    if (err.name !== 'AbortError') {
                        copyToClipboard(text);
                    }
                }
            } else {
                // ä¸æ”¯æ´ Web Share APIï¼Œfallback åˆ°è¤‡è£½
                copyToClipboard(text);
            }
        }
        
        // è¤‡è£½åˆ°å‰ªè²¼ç°¿
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('âœ… å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼');
            }).catch(() => {
                // Fallback
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('âœ… å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼');
            });
        }
        
        // ä¸‹è¼‰ CSV
        function downloadCSV(calcType) {
            const csv = generateCSV(calcType);
            const typeNames = {
                'concrete': 'æ··å‡åœŸè¨ˆç®—',
                'brick': 'ç£šå¡Šè¨ˆç®—',
                'tiles': 'ç“·ç£šè¨ˆç®—',
                'paint': 'æ²¹æ¼†è¨ˆç®—',
                'flooring': 'åœ°æ¿è¨ˆç®—',
                'selfleveling': 'è‡ªæµå¹³è¨ˆç®—'
            };
            
            const date = new Date().toISOString().split('T')[0];
            const filename = `mcalc_${typeNames[calcType]}_${date}.csv`;
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            link.click();
            URL.revokeObjectURL(link.href);
        }
        
        // åˆ—å°/åŒ¯å‡º PDF
        function printPDF() {
            window.print();
        }
    </script>
